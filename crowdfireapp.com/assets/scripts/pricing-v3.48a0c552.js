function customFetch(e,i={}){return new Promise((n,t)=>{fetch(e,i).then(e=>e.ok?e.json():t(e)).then(e=>n(e)).catch(e=>{t(e)})})}$(function(){$(".mobile-tab a").click(function(e){e.preventDefault();var i=$(this).closest(".tab-pane"),n=$(this).attr("data-content"),t=$(this).parent();switch(i.find(".mobile-tab").find("li").removeClass("active"),n){case"free-content":case"plus-content":case"premium-content":case"vip-content":i.find(".data-toggle").hide(),i.find("."+n).show(),t.addClass("active")}})});var twitterBaseUrl=accountsBaseUrl+"/auth/twitter",instagramBaseUrl=accountsBaseUrl+"/auth/instagram",fbBaseUrl=api2BaseUrl+"/auth-starter/api/1.0/auth/facebook?isMultiAuth=1";function getParamsStr(){return document.location.search.split("?").pop()}function updateLoginUrls(e){if(initializeLoginUrls(),e){var i="";if("upgradeSignInModal"===e)i=webAppUrl+"/pricing?source=Premium%20Features";else if("pricingPageSignInModal"===e)i=webAppUrl+"/pricing?source=Pricing%20Page";else{if("data-management"!==e)return;i=baseUrl+"/data-management"}var n=$(".js-login-twitter").attr("href")+"&send_to="+i,t=$(".js-login-instagram").attr("href")+"&send_to="+i,o=$(".js-login-facebook").attr("href")+"&send_to="+i;$(".js-login-twitter").attr("href",n),$(".js-login-instagram").attr("href",t),$(".js-login-facebook").attr("href",o)}}function updateFollowCfFlagInLoginUrls(e){var i=$(".js-login-twitter").attr("href").replace("&followCf=true","").replace("&followCf=false","")+"&followCf="+e;$(".js-login-twitter").attr("href",i)}function init(){checkAppLaunch(),initializeLoginUrls()}function initializeLoginUrls(){var e=getParamsStr(),i=e.indexOf("referrerId")>-1,n=$(".js-login-twitter"),t=$(".js-login-instagram"),o=$(".js-login-facebook"),a="?"+(i?e+"&":"")+(isInvitedFromBranch?"beta=bullseye&":"")+"rememberMe=true&firebotVersion=3.0",l=twitterBaseUrl+a,r=instagramBaseUrl+a,s=fbBaseUrl+a;n.attr("href",l),t.attr("href",r),o.attr("href",s)}function checkAppLaunch(){$.cookie("lastAppOpen")||(window.clevertap&&window.clevertap.profile.push({Site:{"Last App Open":new Date}}),$.cookie("lastAppOpen",Date.now(),$.extend({expires:1},cookieOptions)))}function desktopLoginClickHandlers(){const e=["#signinModal","#signupModal","#emailSignupModal","#emailSigninModal","#emailPasswordResetModal","#emailResetPasswordLinkSentModal"];function i(i){e.map(e=>{e===i?$(e).modal("show"):$(e).modal("hide")})}$("#signinModalTrigger").click(function(){return updateFollowCfFlagInLoginUrls(!1),i("#signinModal"),!1}),$("#signupModalTrigger").click(function(){return updateFollowCfFlagInLoginUrls($("#follow-justunfollow-signupModal").is(":checked")),i("#signupModal"),!1}),$("#emailSigninModalTrigger").click(function(){return i("#emailSigninModal"),!1}),$("#socialEmailSigninModalTrigger").click(function(){return i("#emailSigninModal"),!1}),$("#emailSignupModalTrigger").click(function(e){return i("#emailSignupModal"),!1}),$("#emailSignupSocialModalTrigger").click(function(){return i("#emailSignupModal"),!1}),$("#emailPasswordResetModalTrigger").click(function(){return i("#emailPasswordResetModal"),!1}),$("#emailPasswordResetSignInModalTrigger").click(function(){return i("#emailSigninModal"),!1}),$("#emailPasswordResetLinkSentSignInModalTrigger").click(function(){return i("#emailSigninModal"),!1})}function ValidateEmail(e){return!!/[\w-]+@([\w-]+\.)+[\w-]+/.test(e)}function emailSignInButtonClickHandler(){const e=$("#login-email-input").val(),i=$("#login-password-input").val();if(!1===ValidateEmail(e))$("#login-email-input-validation").html("Invalid Email");else{$("#login-email-input-validation").html(""),$("#email-login-button").addClass("loading");const n={email:e,password:i};customFetch(accountsBaseUrl+"/crowdfire/api/1.0/auth/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)}).then(e=>{if(e){let e=webBaseUrl;if(window.location.pathname&&window.location.pathname.length&&window.location.pathname.includes("firebotx")){e=`${webBaseUrl}/#/firebotx`;const i=new Date,n=i.getTime()+1296e6;i.setTime(n);let t=".crowdfireapp.com";webBaseUrl.includes("cfstage")&&(t=".cfstage.com"),document.cookie="webview=1; expires="+i.toUTCString()+"; domain="+t}window.location.href=e}}).finally(()=>{$("#email-login-button").removeClass("loading")}).catch(e=>{"function"==typeof e.text?e.text().then(e=>{const i=JSON.parse(e);$("#signIn-error-response-placeholder").html(i.message)}):$("#signIn-error-response-placeholder").html("There was some error on our end")})}}function desktopEmailSignInSubmit(){$("#email-login-button").on("click",emailSignInButtonClickHandler),$("#email-signin-form").keydown(function(e){13==e.which&&emailSignInButtonClickHandler()})}function clearFields(e){["#login-email-input-validation","#signup-username-input-validation","#signup-email-input-validation","#signup-password-input-validation","#signup-confirm-password-input-validation","#signIn-error-response-placeholder","#reset-password-response-placeholder"].map(i=>{i!==e&&$(i)&&$(i).html("")})}function emailSignUpButtonClickHandler(){const e=$("#signup-username-input").val(),i=$("#signup-email-input").val(),n=$("#signup-password-input").val(),t=$("#signup-confirm-password-input").val();if(0===e.length)$("#signup-username-input-validation").html("Username must not be blank"),clearFields("#signup-username-input-validation");else if(!1===ValidateEmail(i))$("#signup-email-input-validation").html("Invalid Email"),clearFields("#signup-email-input-validation");else if(n!==t)$("#signup-confirm-password-input-validation").html("Passwords do not match"),clearFields("#signup-confirm-password-input-validation");else{clearFields(),$("#email-signup-submit").addClass("loading");const t={email:i,password:n,fullName:e},o={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};customFetch(accountsBaseUrl+"/crowdfire/api/1.0/auth/sign-up",o).then(()=>{let e=webBaseUrl;if(window.location.pathname&&window.location.pathname.length&&window.location.pathname.includes("firebotx")){e=`${webBaseUrl}/#/firebotx`;const i=new Date,n=i.getTime()+1296e6;i.setTime(n);let t=".crowdfireapp.com";webBaseUrl.includes("cfstage")&&(t=".cfstage.com"),document.cookie="webview=1; expires="+i.toUTCString()+"; domain="+t}window.location.href=e}).finally(()=>{$("#email-signup-submit").removeClass("loading")}).catch(e=>{"function"==typeof e.text?e.text().then(e=>{const i=JSON.parse(e);$("#signup-confirm-password-input-validation").html(i.message)}):$("#signup-confirm-password-input-validation").html("There was some error on our end")})}}function desktopEmailSignUpSubmit(){$("#email-signup-form").keydown(function(e){13==e.which&&emailSignUpButtonClickHandler()}),$("#email-signup-submit").on("click",emailSignUpButtonClickHandler)}function resetPasswordInitiateButtonClickHandler(){const e={email:$("#reset-email-input").val()},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};$("#reset-password-button").addClass("loading"),customFetch(accountsBaseUrl+"/crowdfire/api/1.0/auth/reset-password-initiate",i).then(()=>{$("#emailPasswordResetModal").modal("hide"),$("#emailResetPasswordLinkSentModal").modal("show")}).finally(()=>{$("#reset-password-button").removeClass("loading")}).catch(e=>{"function"==typeof e.text?e.text().then(e=>{const i=JSON.parse(e);$("#signup-confirm-password-input-validation").html(i.message)}):$("#signup-confirm-password-input-validation").html("There was some error on our end")})}function desktopResetPassword(){$("#reset-password-button").on("click",resetPasswordInitiateButtonClickHandler),$("#primary-password-reset-initiate-form").keydown(function(e){13==e.which&&resetPasswordInitiateButtonClickHandler()})}function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}$(".js-login").on("click",function(e){e.preventDefault();var i=getParamsStr().indexOf("referrerId")>-1;if($(this).hasClass("js-login-twitter")){ga("send","event","Home Page","Login","Twitter");var n="Sign Up / Login Attempt",t={Method:"Twitter","Is Referred":i,"Referral Source":i?"Email Invite":""};window.clevertap&&window.clevertap.event.push(n,t)}else if($(this).hasClass("js-login-instagram")){ga("send","event","Home Page","Login","Instagram");n="Sign Up / Login Attempt",t={Method:"Instagram","Is Referred":i,"Referral Source":i?"Email Invite":""};window.clevertap&&window.clevertap.event.push(n,t)}else if($(this).hasClass("js-login-facebook")){ga("send","event","Home Page","Login","Facebook");n="Sign Up / Login Attempt",t={Method:"Facebook","Is Referred":i,"Referral Source":i?"Email Invite":""};window.clevertap&&window.clevertap.event.push(n,t)}setTimeout(function(){window.location=$(this).attr("href")}.bind(this),300)}),$(".js-mixpanel-signup-trigger").on("click",function(){updateLoginUrls($(this).attr("name"));var e={"Button Name":"Get Started",Context:$(this).data("btn-context"),"Url Path":window.location.pathname,Text:$(this).text()};window.clevertap&&window.clevertap.event.push("Click Button",e)}),init(),$(document).ready(function(){desktopLoginClickHandlers(),desktopEmailSignInSubmit(),desktopEmailSignUpSubmit(),desktopResetPassword(),$("#mobileSigninModalTrigger").click(function(){return updateFollowCfFlagInLoginUrls(!1),$("#mobileSigninModal").modal("show"),$("#mobileSignupModal").modal("hide"),!1}),$("#mobileSignupModalTrigger").click(function(){return updateFollowCfFlagInLoginUrls($("#follow-justunfollow-mobileSignupModal").is(":checked")),$("#mobileSigninModal").modal("hide"),$("#mobileSignupModal").modal("show"),!1}),$(".js-mobile-signin-modal-close").on("click",function(){$("#signUpEmailInput").val(""),$("#signupEmailSubmitSuccessMsg").hide(),$("#signupEmailSubmitErrorMsg").hide(),$("#signUpEmailInputForm").hide(),$("#signUpEmailBtn").addClass("flex").removeClass("hide"),$(".navbar-toggle").hasClass("collapsed")||$(".navbar-toggle").trigger("click")}),$("#follow-justunfollow-mobileSignupModal").change(function(){updateFollowCfFlagInLoginUrls($(this).is(":checked"))}),$("#follow-justunfollow-signupModal").change(function(){updateFollowCfFlagInLoginUrls($(this).is(":checked"))})}),$(function(){function e(){$(window).width()>768&&$(".dropdown-features").hover(function(){$(".dropdown-features-menu",this).stop(!0,!0).fadeIn("fast"),$(this).toggleClass("open")},function(){$(".dropdown-features-menu",this).stop(!0,!0).fadeOut("fast"),$(this).toggleClass("open")})}e(),$(window).resize(e)}),$(document).ready(function(){var e=getUrlParameter("error");989===parseInt(e)?($("#instaLoginErrorModal").modal("show"),$("#instaLoginErrorModalText")&&$("#instaLoginErrorModalDescription")&&($("#instaLoginErrorModalText").text("New Instagram Sign-up Disabled"),$("#instaLoginErrorModalDescription").text("The Instagram account you're trying to log in with does not exist in our system. Please use email or other sign up methods to log in, as Instagram sign up is disabled."))):990===parseInt(e)&&($("#instaLoginErrorModal").modal("show"),$("#instaLoginErrorModalText")&&$("#instaLoginErrorModalDescription")&&($("#instaLoginErrorModalText").text("Login with Instagram has been deprecated."),$("#instaLoginErrorModalDescription").text("Please use a different login method. If you have not enabled login using a different method, please click on login via email > forgot password and reset your password."),$("#instaLoginErrorModalCTA").html(""))),$("#instaLoginErrorModalBtn").click(function(){$("#instaLoginErrorModal").modal("hide")}),$("#instagramLoginDeprecatedModalTrigger").click(function(){$("#instaLoginErrorModal").modal("show"),$("#instaLoginErrorModalText")&&$("#instaLoginErrorModalDescription")&&($("#instaLoginErrorModalText").text("Login with Instagram has been deprecated."),$("#instaLoginErrorModalDescription").text("Please use a different login method. If you have not enabled login using a different method, please click on login via email > forgot password and reset your password."),$("#instaLoginErrorModalCTA").html(""))})});